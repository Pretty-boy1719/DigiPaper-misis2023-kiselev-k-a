# Министерство науки и высшего образования РФ

## Федеральное государственное автономное образовательное учреждение высшего образования  
«Национальный исследовательский технологический университет "МИСиС"»

**Институт информационных технологий и компьютерных наук**  
**Кафедра инженерной кибернетики**  

### Проектная работа  
по дисциплине «Технологии программирования»  
на тему «Деформация бумаги DigiPaper»

**Выполнил:**  
студент 2-го курса,  
гр. БПМ-22 3- Киселев К.А.

**Проверил:**  
доцент, к.т.н. Полевой Д.В.

Москва, 2024

---

## Оглавление

1. [Техническое задание](#техническое-задание)
2. [Пользовательское описание](#пользовательское-описание)
   1. [Взаимодействие с библиотекой](#взаимодействие-с-библиотекой)
   2. [Реализованная связь между просчетом точек и отрисовкой результата](#реализованная-связь-между-просчетом-точек-и-отрисовкой-результата)
3. [Техническое описание](#техническое-описание)
   1. [Структура библиотеки](#структура-библиотеки)
   2. [Поля структуры](#поля-структуры)
   3. [Методы структуры](#методы-структуры)
   4. [Установка библиотеки](#установка-библиотеки)
   5. [Подключение в cmake](#подключение-в-cmake)
   6. [Подключение файла заголовка](#подключение-файла-заголовка)

---

## Техническое задание

Создание библиотеки для расчетов изгиба углов листа бумаги с помощью настраиваемого алгоритма.  

**Входные данные:**  
- Размерность листа (половина длины листа), пары точек, отображающие место сгиба на бумаге, радиус искривления.

**Выходные данные:**  
- Координаты точек в пространстве, изображающие бумагу.

После работы алгоритма, разработчик имеет доступ к массиву с точками и функционалу работы с ним. При вызове метода записи, результат запишется в выходной файл (`output.txt`).

- Ссылка на родительский проект: https://github.com/BlackAWhite8/digipaper  
- Ссылка на дочерний проект: https://github.com/Pretty-boy1719/misis2023f-22-03-kiselev-k-a.git

---

## Пользовательское описание

Библиотека позволяет управлять пространством точек, а также загибать края плоскости бумаги. Для использования библиотеки необходимо установить библиотеку Eigen (например, с использованием vcpkg).

### Взаимодействие с библиотекой

После подключения библиотеки, пользователь должен вызвать конструктор структуры `Space`, по желанию указав размерность пространства, в противном случае будет выбрано значение по умолчанию. Начало координат находится в центре бумаги.

Пример создания объекта:

```cpp
Space area(100); 
Space::Point3 c1(-100, 10, 0);
Space::Point3 c2(-30, 100, 0);
double radius3 = 60;

area.cylindrical_bending(c1, c2, radius3);
std::ofstream output;
area.WriteTo(output);
```

### Реализованная связь между просчетом точек и отрисовкой результата

Интерактивное меню позволяет пользователю взаимодействовать с окном вывода, используя слайдеры для изменения углов отображения и другие элементы для управления отображением модели.

---

## Техническое описание

### Структура библиотеки

Используется кроссплатформенная библиотека Eigen. Структура `Space` включает в себя структуры `Point3`, `Line2`, `CylindricalCoordinate`, а также методы для расчетов.

### Поля структуры:

1. `std::vector<Point3> surface` — Вектор, хранящий пространство точек.
2. `const ll dim_` — Размерность пространства.
3. `const ll cube_` — Количество точек в одном осевом кубе.

### Методы структуры:

1. `Point3 compute_midpoint(Point3 a1, Point3 a2);` — Вычисление середины между двумя точками.
2. `Line2 compute_perpendicular_line(Line2 line, Point3 mid);` — Нахождение уравнения перпендикулярной линии.
3. `double compute_distance_to_line(Point3 m, Line2 line);` — Расчет расстояния от точки до линии.
4. `Line2 compute_line_points(Point3 p1, Point3 p2);` — Построение уравнения прямой.
5. `bool is_point_below_line(Point3 p, Line2 l);` — Проверка нахождения точки ниже линии.
6. `double calculate_angle_between_lines(const Eigen::Vector2d& line1, const Eigen::Vector2d& line2);` — Вычисление угла между линиями.
7. `CylindricalCoordinate to_cylindr_coordinate(Point3 p, Line2 perp_line, double r, Line2 fold);` — Перевод координат в цилиндрические.
8. `Point3 cylindrical_to_cartesian(CylindricalCoordinate cylCoords, Point3 offset, double angle);` — Перевод цилиндрических координат в декартовы.
9. `Point3 round_cord(Point3 p);` — Приведение координат к удовлетворяющим требованиям.
10. `long long cord_to_vec(double xx, double yy, double zz);` — Обращение к массиву по координатам.
11. `Point3 vec_to_cord(ll num);` — Получение точки по индексу массива.
12. `bool is_paper(ll x, ll y, ll z);` — Проверка точки на выделенность (окрашенность).
13. `void change_point(Point3 p, bool is_paper);` — Изменение координат и окрашивание.
14. `Point3 get_point(ll x, ll y, ll z);` — Получение точки по координатам.
15. `void cylindrical_bending(Point3 a1, Point3 a2, double radius);` — Изгиб угла бумаги по точкам и радиусу.
16. `std::ostream& WriteTo(std::ostream& ostrm);` — Запись результата в поток.

### Установка библиотеки

```bash
git clone https://github.com/Pretty-boy1719/misis2023f-22-03-kiselev-k-a.git
cmake -S . -B build -DCMAKE_TOOLCHAIN_FILE=<путь до vcpkg.cmake>
cmake --build build --config Release
cmake --install build
```

### Подключение в cmake:

```cmake
project(NAME)
add_executable(NAME1 main.cpp)
add_subdirectory(digi_paper)
target_link_libraries(NAME1 digiPaper)
```

### Подключение файла заголовка:

```cpp
#include <digiPaper/digi_paper.hpp>
```
```

Этот пример представляет основные разделы документа в формате Markdown. Вы можете редактировать его под свои нужды.
